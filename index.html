<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Brick Credit Ledger</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header class="top-bar">
    <h1>Brick Credit Ledger</h1>
    <button id="themeToggleBtn" class="theme-toggle">ðŸŒ™ Dark</button>
  </header>

  <div class="container">
    <!-- CUSTOMER SECTION -->
    <section>
      <h2>Customer Master</h2>
      <div class="form-row">
        <label>Customer Name</label>
        <input type="text" id="custName" class="required">
      </div>
      <div class="form-row">
        <label>Mobile Number</label>
        <input type="text" id="custMobile" class="required">
      </div>
      <div>
        <button id="addCustomerBtn">Add / Update Customer</button>
        <button id="deleteCustomerBtn" style="background:linear-gradient(135deg,#ef4444,#b91c1c);box-shadow:0 2px 6px rgba(239,68,68,0.4);">
          Delete Customer
        </button>
      </div>

      <h3>Select Customer</h3>
      <input type="text" id="customerSearch" placeholder="Search by name or mobile">
      <select id="customerSelect"></select>

      <p id="currentCustomerLabel"><strong>Current Customer:</strong> None selected</p>
    </section>

    <!-- TRANSACTION SECTION -->
    <section>
      <h2>Add Purchase</h2>
      <p id="currentCustomerInline"><strong>For:</strong> None selected</p>

      <div class="form-row">
        <label>Date</label>
        <input type="date" id="trxDate" class="required">
      </div>
      <div class="form-row">
        <label>Item</label>
        <input type="text" id="trxItem" placeholder="Bricks">
      </div>
      <div class="form-row">
        <label>Quantity</label>
        <input type="number" id="trxQty" step="0.01">
      </div>
      <div class="form-row">
        <label>Rate per Unit</label>
        <input type="number" id="trxRate" step="0.01">
      </div>
      <div class="form-row">
        <label>Discount</label>
        <input type="number" id="trxDiscount" step="0.01" value="0">
      </div>
      <div class="form-row">
        <label>Amount Paid Now</label>
        <input type="number" id="trxPaid" step="0.01" value="0">
      </div>

      <div class="form-row">
        <label>Total Amount</label>
        <input type="text" id="trxTotal" readonly>
      </div>
      <div class="form-row">
        <label>Net Amount</label>
        <input type="text" id="trxNet" readonly>
      </div>
      <div class="form-row">
        <label>Balance Change</label>
        <input type="text" id="trxBalanceChange" readonly>
      </div>

      <button id="addTransactionBtn">Save Transaction</button>
    </section>

    <!-- REPORT SECTION -->
    <section>
      <h2>Ledger / Period Report</h2>

      <div class="form-row">
        <label>Filter Type</label>
        <select id="filterType">
          <option value="month">Month</option>
          <option value="day">Day</option>
          <option value="year">Year</option>
        </select>
      </div>

      <div class="form-row" id="monthFilterRow">
        <label>Month</label>
        <input type="month" id="reportMonth" class="required-filter">
      </div>

      <div class="form-row" id="dayFilterRow" style="display:none;">
        <label>Day</label>
        <input type="date" id="reportDay" class="required-filter">
      </div>

      <div class="form-row" id="yearFilterRow" style="display:none;">
        <label>Year</label>
        <input type="number" id="reportYear" min="2000" max="2100" class="required-filter">
      </div>

      <button id="loadReportBtn">Load Report</button>
      <button id="exportExcelBtn">Export Table to Excel</button>
      <button id="exportCsvBtn">Export Table to CSV</button>

      <h3 id="reportTitle"></h3>
      <table id="ledgerTable">
        <thead>
          <tr>
            <th>Date</th>
            <th>Item</th>
            <th>Qty</th>
            <th>Rate</th>
            <th>Total</th>
            <th>Discount</th>
            <th>Net</th>
            <th>Paid</th>
            <th>Running Balance</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody></tbody>
        <tfoot>
          <tr>
            <th colspan="9">Opening Balance</th>
            <th id="openingBalance">0</th>
          </tr>
          <tr>
            <th colspan="9">Total Purchase (Net)</th>
            <th id="monthPurchase">0</th>
          </tr>
          <tr>
            <th colspan="9">Total Paid</th>
            <th id="monthPaid">0</th>
          </tr>
          <tr>
            <th colspan="9">Total Discount</th>
            <th id="monthDiscount">0</th>
          </tr>
          <tr>
            <th colspan="9">Closing Balance (Carry Forward)</th>
            <th id="closingBalance">0</th>
          </tr>
          <tr>
            <th colspan="9">Lifetime Total Paid</th>
            <th id="lifetimePaid">0</th>
          </tr>
          <tr>
            <th colspan="9">Lifetime Closing Balance</th>
            <th id="lifetimeClosing">0</th>
          </tr>
        </tfoot>
      </table>
      <p>Use browser Print â†’ Save as PDF to get a PDF of this report.</p>
    </section>

    <!-- CUSTOMER SUMMARY SECTION -->
    <section>
      <h2>Customer Summary (Selected Filter)</h2>
      <p>This shows each customerâ€™s closing balance for the chosen period so you know who still has to pay.</p>

      <table id="summaryTable">
        <thead>
          <tr>
            <th>Customer</th>
            <th>Period Purchase (Net)</th>
            <th>Period Paid</th>
            <th>Period Discount</th>
            <th>Closing Balance</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </section>
  </div>

  <script src="app.js"></script>
</body>
</html>
